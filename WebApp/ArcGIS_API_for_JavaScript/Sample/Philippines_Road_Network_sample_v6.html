<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="initial-scale=1,maximum-scale=1,user-scalable=no"
    />
    <title>
      Sample
    </title>
    <style>

html,
body {
    padding: 0;
    margin: 0;
    background-color: rgb(0, 48, 77, 0.95); /* #00304D*/
}

#applicationDiv {
  display: flex;
  flex-wrap: wrap;
  height: 100%;
  padding: 10px;
  margin: 0 auto;
  box-sizing: border-box;
}

.container {
  display: grid;
  border: solid 2.5px gray;
  flex-wrap: wrap;
  height: 100%;
  width: 100%;
  box-sizing: border-box;
  grid-template-columns: 0.35fr 1fr;
  background-color: rgb(0, 48, 77, 0.95);
  border-right: 0;
}

#viewDiv {
  padding: 0;
  margin: 0;
  height: 100%;
  width: 100%;
  background-color: rgb(0, 48, 77, 0.95);
  flex: 1 1 auto;
  order: 1;
  overflow: hidden;
  box-sizing: border-box;
}

#informationDiv {
  border: solid 2px yellow;
  display: block;
  height: 96.5vh;
  border-top: 0;
  border-bottom: 0;
}

#legendDiv {
  background-color: rgb(0, 0, 0, 0.5);
  z-index: 99;
  position: absolute;
  display: none;
}

#titleDiv {
  color: orange;
  font-family: Avenir Next;
  font-size: 2.1rem;
  font-weight: bold;
  text-align: center;
  background-color: rgb(0, 48, 77, 0.95);
  padding: 0.5rem 1rem 1rem;
  box-sizing: border-box;
}

      #damageCountInViewDiv {
        width: 100%;
        font-family: Avenir Next;
        color: orange;
        font-size: 1.5rem;
        font-weight: bold;
        padding-left: 0.7rem;
        margin-bottom: 1rem;
      }

      #damageCountInViewDiv b {
        font-family: Avenir Next;
        color: white;
        font-size: 1.5rem;
        font-weight: lighter;
      }

      /*-Major Road Damage List-*/
      #majorRoadDamageList, #roadIdList, #roadSectionList {
        background-color: rgb(0, 48, 77, 0.95);; /* #00304D*/;
        width: 100%;
        height: 70.5vh;
        margin: 0;
        padding-right: 3rem;
        padding-left: 3rem;
        overflow-y: scroll;
        overflow-x: auto;
        box-sizing: border-box;
      }

      /*-- Click category and switch to different content --*/
    #tab1:checked~.panels #area1,
    #tab2:checked~.panels #area2,
    #tab3:checked~.panels #area3 {
        display: block;
        padding: 0;
        margin: 0;
        background-color: rgb(0, 48, 77, 0.95);
        width: 100%;
        box-sizing: border-box;
      }

      .chart_panel {
        background-color: orange;
        width: 40%;
        height: 3vh;
        margin-left: auto;
        margin-right: auto;
        color: rgb(0, 48, 77, 0.95);
        font-family: Avenir Next;
        background-color: orange;
        margin-bottom: 3%;
        margin-top: 3%;
        font-size: 1rem;
        font-weight: bold;
        text-align: center;
        padding-top: 2%;
      }

      .list_panel {
        background-color: orange;
        width: 40%;
        height: 3vh;
        margin-left: auto;
        margin-right: auto;
        color: rgb(0, 48, 77, 0.95);
        font-family: Avenir Next;
        background-color: orange;
        margin-bottom: 5%;
        margin-top: 5%;
        font-size: 1rem;
        font-weight: bold;
        text-align: center;
        padding-top: 2%;
      }

      .list_panel2 {
        background-color: orange;
        width: 40%;
        height: 3vh;
        margin-left: auto;
        margin-right: auto;
        color: rgb(0, 48, 77, 0.95);
        font-family: Avenir Next;
        background-color: orange;
        margin-bottom: 5%;
        margin-top: 5%;
        font-size: 1rem;
        font-weight: bold;
        text-align: center;
        padding-top: 2%;
      }

      /*-- Hide radio button --*/
      input[name="check1"] {
        display: none;
      }


      .tab_lab1, .tab_lab2, .tab_lab3 {
      text-align: center;
      margin-left: 3rem;
      padding-right: 1rem;
      width: 100%;
      font-size: 1.5rem;
      color: white;
      background-color: rgb(0, 48, 77, 0.95);
      }

      #tab1:checked~.tab_lab1,
      #tab2:checked~.tab_lab2,
      #tab3:checked~.tab_lab3,
      #tab4:checked~.tab_lab4 {
        text-decoration: underline;
        text-decoration-color: orange;
      }

      /*-- .panel allows to switch display of contents --*/
      .panel {
        padding: 1px;
        display: none;
      }

      #area1, #area2, #area3{
        text-align: left;
      }

      input[name="check"] {
        display: none;
      }

      @keyframes fadeIn {
        0% { opacity: 0; }
        100% { opacity: 1; }
      }

      .panel-side {
        padding: 0;
        margin: 0;
      }

      .panel-side ul {
        list-style: none;
        margin: 0;
        padding: 0;
        font-weight: 100;
        color: white;
        font-size: 1.2vw;

      }

      .panel-side li {
        list-style: none;
        padding-top: 1rem;
        font-family: Avenir Next;
        font-size: 0.9rem;
        background-color: rgb(0, 0, 0, 0);
      }

      .panel-side li b{
        color: orange;
        font-family: Avenir Next;
        font-size: 1.2rem;
      }

      .panel-result {
        cursor: pointer;
        margin: 0px 0;
        background-color: rgb(0, 0, 0, 0);
      }

      .panel-result:hover,
      .panel-result:focus,
      .panel-result.selected {
        background-color: rgba(73, 72, 72, 0.4);
      }

      /*-- Chart Panel --*/
      #chartPanelDiv {
        display: block;
        background: rgb(0, 0, 0, 0);
        font-family: Avenir Next;
        display: flex; flex-direction: column;
        height: 87vh;
      }

          #chartdiv, #chartdiv1 {
          width: 100%;
          height: 25vh;
          align-items: center;
          font-family: Avenir Next;
          margin-bottom: 0;
          margin-top: 1rem;
          background-color: rgb(0, 48, 77, 0.95);
          }

      #balanceBudgetValue, #totalSpentValue {
        margin-left: auto;
        margin-right: auto;
        margin-bottom: 1rem;
        padding: 0;
        line-height: 0.8rem;
      }

/*-Detailed information Panel-*/

#damageLabel,
#repaireStatusLabel,
#streetNameLabel,
#reportLabel,
#estimatedCostLabel {
  color: orange;
  font-family: Avenir Next;
  font-weight: lighter;
  font-size: 1.4rem;
  margin-left: 2rem;
}

#damageLabel b {
  color: orange;
  font-family: Avenir Next;
  font-weight: lighter;
  font-size: 1rem;
}

    /*-General-*/
    h3 {
      color: orange;
        font-family: Avenir Next;
        text-align: left;
        font-size: 1.2rem;
        font-weight: lighter;
        margin-left: 2rem;
        margin-top: 0.5rem;
        margin-bottom: 0;
        }

    h4 {
        color: #964b00;
        font-family: Avenir Next;
        text-align: center;
        font-weight: normal;
        font-size: 1.6rem;
        margin-left: auto;
        margin-right: auto;
        background-color: rgb(0,0,0,0);
        margin-top: 0;
        margin-bottom: 0;
        padding: 0;
      }

      h5 {
        color: white;
        font-family: Avenir Next;
        text-align: center;
        font-size: 1.1rem;
        font-weight: lighter;
        margin-left: auto;
        margin-right: auto;
        margin-top: 0;
        margin-bottom: 0;
        padding: 0;
      }

    h6 {
      color: white;
        font-family: Avenir Next;
        text-align: left;
        font-size: 1.2rem;
        font-weight: lighter;
        margin-left: 2rem;
        margin-top: 0.5rem;
        margin-bottom: 0;
        padding-right: 2rem;
        float: left;
        }
    
    .active, .test:hover {
      background-color: rgba(77, 75, 75, 0);
        color: white;
        font-size: 1.5rem;
        text-decoration: underline;
        text-decoration-color: orange;
}

    /* Esris Setting */
    .esri-layer-list__item-toggle-icon,
      .esri-layer-list__item-title {
        color: white;
     }

      .sassy-theme .esri-popup__header-title {
        width: 17vw;
        background-color: rgba(0, 0, 0, 0.8);
      }

      .sassy-theme .esri-widget {
        background-color: rgb(0, 0, 0, 0.5);
      }
      
      .sassy-theme .esri-menu,
      .sassy-theme .esri-popup__main-container,
      .sassy-theme .esri-popup .esri-popup__pointer-direction,
      .sassy-theme .esri-popup .esri-popup__button,
      .sassy-theme .esri-button,
      .sassy-theme .esri-input,
      .sassy-theme .esri-layer-list {
        background-color: rgb(0, 0, 0, 0.5);
        color: #fff;
      }
      
      .sassy-theme .esri-legend .esri-legend__layer-cell--info {
        background-color: black;
        color: white;
        font-size: 0.85vw;
      }

      .sassy-theme .esri-legend__layer-caption {
        display: none;
      }

    /* Browser Setting */
      ::-webkit-scrollbar {
        display: none;
      }

    </style>

    <link
    rel="stylesheet"
    href="https://js.arcgis.com/4.24/esri/themes/dark/main.css"
    />
<!-- Resources -->
<script src="https://cdn.amcharts.com/lib/4/core.js"></script>
<script src="https://cdn.amcharts.com/lib/4/charts.js"></script>
<script src="https://www.amcharts.com/lib/4/themes/dark.js"></script>
<script src="https://cdn.amcharts.com/lib/4/themes/animated.js"></script>
<script src="https://js.arcgis.com/4.24/"></script>

    <script>
      require([
      "esri/Basemap",
        "esri/Map",
        "esri/views/MapView",
        "esri/layers/TileLayer",
        "esri/layers/FeatureLayer",
        "esri/widgets/Expand",
        "esri/widgets/Legend",
        "esri/rest/support/Query",
        "esri/widgets/Fullscreen",
        "esri/symbols/TextSymbol",
        "esri/views/SceneView",
        "esri/widgets/LayerList",
        "esri/layers/VectorTileLayer",
        "esri/widgets/BasemapToggle",
        "esri/layers/SceneLayer",
        "esri/layers/support/LabelClass",
        "esri/layers/GraphicsLayer"

      ], function(
        Basemap,
        Map,
        MapView,
        TileLayer,
        FeatureLayer,
        Expand,
        Legend,
        Query,
        Fullscreen,
        TextSymbol,
        SceneView,
        LayerList,
        VectorTileLayer,
        BasemapToggle,
        SceneLayer,
        LabelClass,
        GraphicsLayer

      ) {


// Basemap
var basemap = new Basemap({
  baseLayers: [
    new VectorTileLayer({
      portalItem: {
        id: "0a0d74b5fbc0431fa0f6c938d0b04505" //
      }
    })
  ]
});

// Add Map
var map = new Map({
  basemap: basemap, // "streets-night-vector"
  ground: "world-elevation"

}); 
//map.ground.surfaceColor = "#FFFF";
//map.ground.opacity = 0.5;


// Add scene view
var view = new SceneView({
  map: map,
  container: "viewDiv",
  viewingMode: "local",
  camera: {
    position: {
      x: 121.01,
      y: 14.61,
      z: 60000
    },
    tilt: 50
  },
  environment: {
    background: {
      type: "color", // autocasts as new ColorBackground()
      color: [0, 0, 0, 1]
    },
    
    // disable stars
    starsEnabled: false,
          
    //disable atmosphere
    atmosphereEnabled: false
  }
});


// Basemap Toggle

const toggle = new BasemapToggle({
  view: view,
  nextBaseMap: "hybrid"
});
view.ui.add(toggle, "top-right");

function catchAbortError(error) {
  if (error.name != "AbortError") {
    console.error(error);
  }
}

// OpenStreetMap 3D Buildings
let osmSymbol = {
  type: "mesh-3d",
  symbolLayers: [
    {
      type: "fill",
      material: {
        color: [74, 80, 87, 0.5],
        colorMixMode: "replace"
      },
      edges: {
        type: "solid", // autocasts as new SolidEdges3D()
        color: [225, 225, 225, 0.3]
      }
  }
]
};


var osm3D = new SceneLayer({
  portalItem: {
    id: "ca0470dbbddb4db28bad74ed39949e25"
  },
  title: "OpenStreetMap 3D Buildings"
});
map.add(osm3D);
osm3D.renderer = {
  type: "simple",
  symbol: osmSymbol
}


// Major Road network
var majorRoadRenderer = {
  type: "unique-value",
  valueExpression: "When($feature.ROAD_SEC_CLASS == 'Primary', 'Primary', \
                           $feature.ROAD_SEC_CLASS == 'Secondary', 'Secondary', \
                           $feature.ROAD_SEC_CLASS)",
  uniqueValueInfos: [
    {
      value: 'Primary',
      label: 'Primary',
      symbol: {
        type: "simple-line",
        color: [236, 76, 0],
        width: "4px",
        style: "solid"
      }
    },
    {
      value: 'Secondary',
      label: 'Secondary',
      symbol: {
        type: "simple-line",
        color: [0, 169, 230],
        width: "2px",
        style: "solid"
      }
    }
  ]
}
var majorRoadLayer = new FeatureLayer({
  portalItem: {
                id:"ab0e0cd5e38d471ba24c5177a4f7279a"
            },
            title: "Major Road",
            outFields: ["*"],
            popupEnabled: false,
            layerId: 2,
            elevationInfo: {
              mode: "on-the-ground"
            },
            renderer: majorRoadRenderer,
            minScale: 1200000,
    maxScale: 0,
            returnGeometry: true

});
map.add(majorRoadLayer);

// Expressway
var expressRoadRenderer = {
  type: "simple",
  symbol: {
        type: "simple-line",
        color: [56, 168, 0],
        width: "4px",
        style: "solid"
      }
};

var expressRoad = new FeatureLayer({
    portalItem: {
        id: "ab0e0cd5e38d471ba24c5177a4f7279a"
    },
    title: "Expressway",
    layerId: 3,
    elevationInfo: {
              mode: "on-the-ground"
            },
    outFields: ["*"],
    renderer: expressRoadRenderer,
    popupEnabled: false,
    returnGeometry: true,
    minScale: 1200000,
    maxScale: 0,
});
map.add(expressRoad);

// Municipal Boundary
var municialLabelClass = {
  symbol: {
            type: "label-3d",// autocasts as new LabelSymbol3D()
            symbolLayers: [
              {
                type: "text", // autocasts as new TextSymbol3DLayer()
                material: {
                  color: "white"
                },
                size: 10,
                color: "black",
                haloColor: "black",
                haloSize: 1,
                font: {
                  family: "Ubuntu Mono",
                  //weight: "bold"
                },
              }
            ],
            verticalOffset: {
              screenLength: 100,
              maxWorldLength: 600,
              minWorldLength: 300
            },
            callout: {
              type: "line", // autocasts as new LineCallout3D()
              color: "white",
              size: 0.7,
              border: {
                color: "grey"
              }
            }
          },
          labelPlacement: "above-center",
          labelExpressionInfo: {
            expression: "$feature.MUNICIPALITY"
            //value: "{TEXTSTRING}"
        }
      }

      //NO__OF_BGYS_
let ngcpDpwhRoadRenderer = {
  type: "simple",
  symbol: {
      type: "simple-fill",
      color: [0, 197, 255, 0.05],
      style: "solid",
      outline: {
        color: "white",
        width: 3,
        style: "short-dot"
      }
    }
}
var municipalBoundary = new FeatureLayer({
    portalItem: {
        id: "ab0e0cd5e38d471ba24c5177a4f7279a"
    },
    title: "Municipal Boundary",
    layerId: 4,
    renderer: ngcpDpwhRoadRenderer,
    outFields: ["*"],
    labelingInfo: [municialLabelClass],
    popupEnabled: false,
    returnGeometry: true
});
map.add(municipalBoundary,0);


// Damage points
var verticalOffsetMajorDamage = {
  screenLength: 100,
  maxWorldLength: 700,
  minWorldLength: 100
};

var verticalOffsetOtherDamage = {
  screenLength: 100,
  maxWorldLength: 500,
  minWorldLength: 100
};

function getUniqueValueSymbol(name, sizeS, damage) {
    if (damage === 'Major') {
        return {
        type: "point-3d", // autocasts as new PointSymbol3D()
        symbolLayers: [
            {
                type: "icon", // autocasts as new IconSymbol3DLayer()
                resource: {
                  href: name
                },
                size: sizeS,
                outline: {
                  color: "white",
                  size: 2
                }
              }
            ],
            verticalOffset: verticalOffsetMajorDamage,

            callout: {
              type: "line", // autocasts as new LineCallout3D()
              color: "white",
              size: 1,
              border: {
                color: "grey"
              }
            }
        }
    } else {
        return {
        type: "point-3d", // autocasts as new PointSymbol3D()
        symbolLayers: [
            {
                type: "icon", // autocasts as new IconSymbol3DLayer()
                resource: {
                  href: name
                },
                size: sizeS,
                outline: {
                  color: "white",
                  size: 2
                }
              }
            ],
            verticalOffset: verticalOffsetOtherDamage,

            callout: {
              type: "line", // autocasts as new LineCallout3D()
              color: "white",
              size: 1,
              border: {
                color: "grey"
              }
            }
        }
    }

    }


var damageRatingSymbol = {
    type: "unique-value",
    valueExpression: "When($feature.Rating == 1, 'Basic', \
                           $feature.Rating == 2, 'Minor', \
                           $feature.Rating == 3, 'Moderate', \
                           $feature.Rating == 4, 'Major', $feature.Rating)",

    uniqueValueInfos: [
        {
            value: "Basic",
            label: "Basic",
            symbol: getUniqueValueSymbol(
                "https://EijiGorilla.github.io/Symbols/Warning Symbol/Basic.svg",
                30,
                "Basic"
            )
        },
        {
            value: "Minor",
            label: "Minor",
            symbol: getUniqueValueSymbol(
                "https://EijiGorilla.github.io/Symbols/Warning Symbol/Minor.svg",
                30,
                "Minor"
            )
        },
        {
            value: "Moderate",
            label: "Moderate",
            symbol: getUniqueValueSymbol(
                "https://EijiGorilla.github.io/Symbols/Warning Symbol/Moderate.svg",
                30,
                "Moderate"
            )
        },
        {
            value: "Major",
            label: "Major",
            symbol: getUniqueValueSymbol(
                "https://EijiGorilla.github.io/Symbols/Warning Symbol/Major.svg",
                30,
                "Major"
            )
        }
    ]
}


var damagePoints = new FeatureLayer({
    portalItem: {
        id: "ab0e0cd5e38d471ba24c5177a4f7279a"
    },
    title: "Damage Ratings of Road",
    layerId: 0,
    renderer: damageRatingSymbol,
    outFields: ["*"],
    popupEnabled: false,
    minScale: 1200000,
    maxScale: 0,
    returnGeometry: true
})
map.add(damagePoints,1);

// Coundary Boundary
var phpBoundary = new FeatureLayer({
          portalItem: {
                id:"ab0e0cd5e38d471ba24c5177a4f7279a"
            },
            layerId: 8,
            title: "Boundary",
            outFields: ["*"],
            labelsVisible: false,
            popupEnabled: false
        });
map.add(phpBoundary);


        // listen to the view's click event
        
    // Pier Chart to summarize damage ratings of hospitals in Ukraine
let chartLayerView;
var highlightSelect;

//var titleDiv = document.getElementById("titleDiv");
//var damageCountInViewDiv = document.getElementById("damageCountInViewDiv");

/* Function for zooming to selected layers */
function zoomToLayer(layer) {
  return layer.queryExtent().then(function(response) {
    view.goTo(response.extent, { //response.extent
      speedFactor: 2
    }).catch(function(error) {
      if (error.name != "AbortError") {
        console.error(error);
      }
    });
  });
}

// Thousand separators function
function thousands_separators(num)
  {
    var num_parts = num.toString().split(".");
    num_parts[0] = num_parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    return num_parts.join(".");
  }

// Chart
// Call amCharts 4
am4core.ready(function() {
am4core.useTheme(am4themes_animated);

// Default Setting
zoomToLayer(damagePoints);


var informationDiv = document.getElementById("informationDiv");
var chartdiv = document.getElementById('chartdiv');
const chartPanelDiv = document.getElementById("chartPanelDiv");
var listDiv = document.getElementById("listDiv");
var detailInfoDiv = document.getElementById("detailInfoDiv");

// Detaild Road Damage Information DIV
var damageLabel = document.getElementById('damageLabel');
var repaireStatusLabel = document.getElementById('repaireStatusLabel');
var streetNameLabel = document.getElementById('streetNameLabel');
var reportLabel = document.getElementById('reportLabel');
var estimatedCostLabel = document.getElementById('estimatedCostLabel');

// Default Setting: list
chartPanelDiv.style.display = "none";
detailInfoDiv.style.display = "none";

// Click 'SUMMARY CHART': 
document.querySelector('.chart_panel input').addEventListener('change', e => {
  listDiv.style.display = e.target.checked ? 'none' : 'block';
  chartPanelDiv.style.display = e.target.checked ? 'block' : 'none';
  detailInfoDiv.style.display = 'none';
  updateChart();
  summaryCostStats().then( updateBudgetRepairChart);

});

// Click 'RETURN TO LIST' from Chart: 
document.querySelector('.list_panel input').addEventListener('change', e => {
  chartPanelDiv.style.display = e.target.checked ? 'none' : 'block';
  listDiv.style.display = e.target.checked ? 'block' : 'none';
  detailInfoDiv.style.display = 'none';
});

// Click 'RETURN TO LIST' from detailed information: 
document.querySelector('.list_panel2 input').addEventListener('change', e => {
  listDiv.style.display = e.target.checked ? 'block' : 'none';
  detailInfoDiv.style.display = e.target.checked ? 'none' : 'block';
 
});

//------------- list of Major Road Damage ------------------//

  //reloStatusLayer.outFields = ["Name", "StatusRC", "Status"];


  function damageRating() {
    return {
    1: "Basic",
    2: "Minor",
    3: "Moderate",
    4: "Major"
  }
  }

  function repairStatus() {
    return {
    1: "Repaired",
    2: "Not Repaired",
    3: "Pending"
  }
  }

//-------------- List of STREET ----------------------------------
 var majorRoadDamageList = document.getElementById("majorRoadDamageList");

 view.when(function() {
  view.whenLayerView(damagePoints).then(function(layerView) {
    layerView.watch("updating", function(val) {
      
      if (!val) {
        // Query for only Expropriation lots
        //var query = new Query();
        //query.geometry = true;
        //query.returnGeometry = true;
        //query.where = "Rating = 4";
        layerView.queryFeatures({
            // Display listed items only in display extent
            geometry: view.extent,
            returnGeometry: true,
            orderByFields: ["ROAD_NAME"]
        }).then(function(result) {
          majorRoadDamageList.innerHTML = "";

          // Count the number of listed items in display extent
          damageCountInViewDiv.innerHTML = result.features.length + "<b>" +" DAMAGES IN VIEW" + "</b>";

          result.features.forEach(function(feature) {
            var attributes = feature.attributes;
            var li = document.createElement("li");
            li.setAttribute("class", "panel-result");

            // Add Expropriation lots to list
            let rating = attributes.Rating;
            li.innerHTML = "<b>" + attributes.ROAD_NAME + "</b>" + "<br>" + damageRating()[rating].toUpperCase() + " DAMAGE";

            // Click an item in the list event
            li.addEventListener("click", function(event) {
              var target = event.target;
              var objectId = feature.attributes.OBJECTID;
              var queryExtent = new Query({
                objectIds: [objectId]
              });

              // Switch to             
              listDiv.style.display = 'none';
              chartPanelDiv.style.display = 'none';
              detailInfoDiv.style.display = 'block';


              // Detailed Information for a selected road damage point
              var repair = attributes.Repair_Status;
              var street = attributes.ROAD_NAME;
              var reportComment = attributes.Comment;
              var repairCost = attributes.Cost;

              damageLabel.innerHTML = "DAMAGE" + "<br>" + "<h6>" + "STATUS" + "</h6>" + "<h3>" + damageRating()[rating].toUpperCase() + "</h3>";
              repaireStatusLabel.innerHTML = "REPAIREMENT" + "<br>" + "<h6>" + "STATUS" + "</h6>" + "<h3>" + repairStatus()[repair].toUpperCase() + "</h3>";
              streetNameLabel.innerHTML = "STREET" + "<br>" + "<h3>" + street + "</h3>";
              reportLabel.innerHTML = "REPORT" + "<br>" + "<h3>" + reportComment + "</h3>";
              estimatedCostLabel.innerHTML = "ESTIMATED REAPIRE COST" + "<br>" + "<h3>" + repairCost + "</h3>";

              // Reset to unchecked
              document.querySelector('.list_panel2 input').checked = false;

              // Go to the clicked spot
              // Query extent for selected expropriation lot in the list
              layerView.queryExtent(queryExtent).then(function(result) {
                if (result.extent) {
                  view.goTo({
                    target: result.extent,
                    speedFactor: 2,
                    zoom: 17})
                    .catch(function(error) {
                      if (error.name != "AbortError") {
                        console.error(error);
                      }
                    }); // End of catch
                  } // End of if (result.extent)
                }); // End of layerView.queryExtent
                
                // Highlight selected lots
                if (highlightSelect) {
                  highlightSelect.remove();
                }
                highlightSelect = layerView.highlight([objectId]);
                
                view.on("click", function() {
                  layerView.filter = null;
                  highlightSelect.remove();
                });
              
              }); // End of li.addEventListener
              majorRoadDamageList.appendChild(li);

              // Hover a mouse over the list and highlight
              li.addEventListener("mouseenter", function(event) {
                var objectId = feature.attributes.OBJECTID;
                
                if (highlightSelect) {
                  highlightSelect.remove();
                }
                highlightSelect = layerView.highlight([objectId]);

                view.on("click", function() {
                  layerView.filter = null;
                  highlightSelect.remove();
                });
              });
            }); // End of result.features.forEach
          }); // End of layerView.queryFeatures
        }
     }); // End of layerView.watch
  }); // End of view.whenLayerView
});

 //-------------- Stree ID ----------------------------------
var roadIdList = document.getElementById("roadIdList");

view.when(function() {
view.whenLayerView(damagePoints).then(function(layerView) {
  layerView.watch("updating", function(val) {
    
    if (!val) {
      // Query for only Expropriation lots
      //var query = new Query();
      //query.geometry = true;
      //query.returnGeometry = true;
      //query.where = "Rating = 4";
      layerView.queryFeatures({
          // Display listed items only in display extent
          geometry: view.extent,
          returnGeometry: true,
          orderByFields: ["SECTION_ID"]
      }).then(function(result) {
        roadIdList.innerHTML = "";

        // Count the number of listed items in display extent
        damageCountInViewDiv.innerHTML = result.features.length + "<b>" +" DAMAGES IN VIEW" + "</b>";

        result.features.forEach(function(feature) {
          var attributes = feature.attributes;
          var li = document.createElement("li");
          li.setAttribute("class", "panel-result");

          // Add Expropriation lots to list
          let rating = attributes.Rating;
          li.innerHTML = "<b>" + attributes.SECTION_ID + "</b>" + "<br>" + damageRating()[rating].toUpperCase() + " DAMAGE";

          // Click an item in the list event
          li.addEventListener("click", function(event) {
            var target = event.target;
            var objectId = feature.attributes.OBJECTID;
            var queryExtent = new Query({
              objectIds: [objectId]
            });

            // Go to the clicked spot
            // Query extent for selected expropriation lot in the list
            layerView.queryExtent(queryExtent).then(function(result) {
              if (result.extent) {
                view.goTo({
                  target: result.extent,
                  speedFactor: 2,
                  zoom: 17})
                  .catch(function(error) {
                    if (error.name != "AbortError") {
                      console.error(error);
                    }
                  }); // End of catch
                } // End of if (result.extent)
              }); // End of layerView.queryExtent
              
              // Highlight selected lots
              if (highlightSelect) {
                highlightSelect.remove();
              }
              highlightSelect = layerView.highlight([objectId]);
              
              view.on("click", function() {
                  layerView.filter = null;
                highlightSelect.remove();
              });
            
            }); // End of li.addEventListener
            roadIdList.appendChild(li);
            //majorRoadDamageList.appendChild(li);

            // Hover a mouse over the list and highlight
            li.addEventListener("mouseenter", function(event) {
              var objectId = feature.attributes.OBJECTID;
              
              if (highlightSelect) {
                highlightSelect.remove();
              }
              highlightSelect = layerView.highlight([objectId]);

              view.on("click", function() {
                  layerView.filter = null;
                highlightSelect.remove();
              });
            });
          }); // End of result.features.forEach
        }); // End of layerView.queryFeatures

      }
   }); // End of layerView.watch
}); // End of view.whenLayerView
});

 //-------------- List by raod class ----------------------------------
 var roadSectionList = document.getElementById("roadSectionList");

view.when(function() {
view.whenLayerView(damagePoints).then(function(layerView) {
  layerView.watch("updating", function(val) {
    
    if (!val) {
      // Query for only Expropriation lots
      //var query = new Query();
      //query.geometry = true;
      //query.returnGeometry = true;
      //query.where = "Rating = 4";
      layerView.queryFeatures({
          // Display listed items only in display extent
          geometry: view.extent,
          returnGeometry: true,
          orderByFields: ["ROAD_SEC_CLASS"]
      }).then(function(result) {
        roadSectionList.innerHTML = "";

        // Count the number of listed items in display extent
        damageCountInViewDiv.innerHTML = result.features.length + "<b>" +" DAMAGES IN VIEW" + "</b>";

        result.features.forEach(function(feature) {
          var attributes = feature.attributes;
          var li = document.createElement("li");
          li.setAttribute("class", "panel-result");

          // Add Expropriation lots to list
          let rating = attributes.Rating;
          li.innerHTML = "<b>" + attributes.ROAD_SEC_CLASS + "</b>" + "<br>" + damageRating()[rating].toUpperCase() + " DAMAGE";

          // Click an item in the list event
          li.addEventListener("click", function(event) {
            var target = event.target;
            var objectId = feature.attributes.OBJECTID;
            var queryExtent = new Query({
              objectIds: [objectId]
            });

            // Go to the clicked spot
            // Query extent for selected expropriation lot in the list
            layerView.queryExtent(queryExtent).then(function(result) {
              if (result.extent) {
                view.goTo({
                  target: result.extent,
                  speedFactor: 2,
                  zoom: 17})
                  .catch(function(error) {
                    if (error.name != "AbortError") {
                      console.error(error);
                    }
                  }); // End of catch
                } // End of if (result.extent)
              }); // End of roadSectionLayerView.queryExtent
              
              // Highlight selected lots
              if (highlightSelect) {
                highlightSelect.remove();
              }
              highlightSelect = layerView.highlight([objectId]);
              
              view.on("click", function() {
                layerView.filter = null;
                highlightSelect.remove();
              });
            
            }); // End of li.addEventListener
            roadSectionList.appendChild(li);
            //majorRoadDamageList.appendChild(li);

            // Hover a mouse over the list and highlight
            li.addEventListener("mouseenter", function(event) {
              var objectId = feature.attributes.OBJECTID;
              
              if (highlightSelect) {
                highlightSelect.remove();
              }
              highlightSelect = layerView.highlight([objectId]);

              view.on("click", function() {
                layerView.filter = null;
                highlightSelect.remove();
              });
            });
          }); // End of result.features.forEach
        }); // End of roadSectionLayerView.queryFeatures

      }
   }); // End of roadSectionLayerView.watch
}); // End of view.whenLayerView
});



// Road Damage Chart:-------------------------------------------------------
async function updateChart() {
    function DamageRating(){
  return {
    1: "Basic",
    2: "Minor",
    3: "Moderate",
    4: "Major"
  }
}

        var total_basic = {
            onStatisticField: "CASE WHEN Rating = 1 THEN 1 ELSE 0 END",
            outStatisticFieldName: "total_basic",
            statisticType: "sum"
        }

        var total_minor = {
            onStatisticField: "CASE WHEN Rating = 2 THEN 1 ELSE 0 END",
            outStatisticFieldName: "total_minor",
            statisticType: "sum"
        }
        
        var total_moderate = {
            onStatisticField: "CASE WHEN Rating = 3 THEN 1 ELSE 0 END",
            outStatisticFieldName: "total_moderate",
            statisticType: "sum"
        }

        var total_major = {
            onStatisticField: "CASE WHEN Rating = 4 THEN 1 ELSE 0 END",
            outStatisticFieldName: "total_major",
            statisticType: "sum"
        }

        var query = damagePoints.createQuery();
        query.outStatistics = [total_basic, total_minor, total_moderate, 
                               total_major];

        query.returnGeometry = true;

        damagePoints.queryFeatures(query).then(function(response){
            var stats = response.features[0].attributes;

            const TOTAL_BASIC = stats.total_basic;
            const TOTAL_MINOR = stats.total_minor;
            const TOTAL_MODERATE = stats.total_moderate;
            const TOTAL_MAJOR = stats.total_major;
            
            var chart = am4core.create("chartdiv", am4charts.PieChart);
                // Add data
    chart.data = [
      {
        "Damage": DamageRating()[1],
        "status": TOTAL_BASIC,
        "color": am4core.color("#00B050")
      },
      {
        "Damage": DamageRating()[2],
        "status": TOTAL_MINOR,
        "color": am4core.color("#FFFF00")   
      },
      {
        "Damage": DamageRating()[3],
        "status": TOTAL_MODERATE,
        "color": am4core.color("#FFAA00") 
      },
      {
        "Damage": DamageRating()[4],
        "status": TOTAL_MAJOR,
        "color": am4core.color("#FF0000")
      }
    ];
    // Set inner radius
    chart.innerRadius = am4core.percent(30);
    
    // Add and configure Series
    function createSlices(field, status){
      var pieSeries = chart.series.push(new am4charts.PieSeries());
      pieSeries.dataFields.value = field;
      pieSeries.dataFields.category = status;
      
      pieSeries.slices.template.propertyFields.fill = "color";
      pieSeries.slices.template.stroke = am4core.color("#fff");
      pieSeries.slices.template.strokeWidth = 1;
      pieSeries.slices.template.strokeOpacity = 1;
      pieSeries.slices.template
      // change the cursor on hover to make it apparent the object can be interacted with
      .cursorOverStyle = [
        {
          "property": "cursor",
          "value": "pointer"
        }
      ];
      
      // Hover setting
      pieSeries.tooltip.label.fontSize = 9;
      
      // Pie
      //pieSeries.alignLabels = false;
      //pieSeries.labels.template.bent = false;
      pieSeries.labels.template.disabled = true;
      pieSeries.labels.template.radius = 3;
      pieSeries.labels.template.padding(0,0,0,0);
      pieSeries.labels.template.fontSize = 9;
      pieSeries.labels.template.fill = "#ffffff";

      // Ticks (a straight line)
      //pieSeries.ticks.template.disabled = true;
      pieSeries.ticks.template.fill = "#ffff00";
      
      // Create a base filter effect (as if it's not there) for the hover to return to
      var shadow = pieSeries.slices.template.filters.push(new am4core.DropShadowFilter);
      shadow.opacity = 0;
      
      // Chart Title

      // Create hover state
      var hoverState = pieSeries.slices.template.states.getKey("hover"); // normally we have to create the hover state, in this case it already exists

      // Slightly shift the shadow and make it more prominent on hover
      var hoverShadow = hoverState.filters.push(new am4core.DropShadowFilter);
      hoverShadow.opacity = 0.7;
      hoverShadow.blur = 5;
      
      // Add a legend
      const LEGEND_FONT_SIZE = 15;
      chart.legend = new am4charts.Legend();
      chart.legend.valueLabels.template.align = "right"
      chart.legend.valueLabels.template.textAlign = "end";
      
      //chart.legend.position = "bottom";
      chart.legend.labels.template.fontSize = LEGEND_FONT_SIZE;
      chart.legend.labels.template.fill = "#ffffff";
      //chart.legend.labels.template.fontWeight = "bold";

      chart.legend.valueLabels.template.fill = am4core.color("#ffffff"); 
      chart.legend.valueLabels.template.fontSize = LEGEND_FONT_SIZE; 
      pieSeries.legendSettings.valueText = "{value.percent.formatNumber('#.')}% ({value})";
      //pieSeries.legendSettings.labelText = "Series: [bold {color}]{category}[/]";
      
      // Chart Title

      /// Define marker symbols properties
      var marker = chart.legend.markers.template.children.getIndex(0);
      var markerTemplate = chart.legend.markers.template;
      marker.cornerRadius(12, 12, 12, 12);
      marker.strokeWidth = 1;
      marker.strokeOpacity = 1;
      marker.stroke = am4core.color("#ccc");
      markerTemplate.width = 18;
      markerTemplate.height = 18;
      
      // This creates initial animation
      //pieSeries.hiddenState.properties.opacity = 1;
      //pieSeries.hiddenState.properties.endAngle = -90;
      //pieSeries.hiddenState.properties.startAngle = -90;
 
      // Click chart and filter, update maps
            
      // Click chart and filter, update maps
      pieSeries.slices.template.events.on("hit", filterByChart, this);
      function filterByChart(ev) {
        const SELECTED = ev.target.dataItem.category;
        if (SELECTED == DamageRating()[1]) {
          selectedStatus = 1;
        } else if (SELECTED == DamageRating()[2]) {
          selectedStatus = 2;
        } else if (SELECTED == DamageRating()[3]) {
          selectedStatus = 3;
        } else if (SELECTED == DamageRating()[4]) {
          selectedStatus = 4;
        } else {
          selectedStatus = null;
        }
        
        view.when(function() {
          view.whenLayerView(damagePoints).then(function (layerView) {
            chartLayerView = layerView;
            chartPanelDiv.style.visibility = "visible";
            
            damagePoints.queryFeatures().then(function(results) {
              const RESULT_LENGTH = results.features;
              const ROW_N = RESULT_LENGTH.length;

              let objID = [];
              for (var i=0; i < ROW_N; i++) {
                  var obj = results.features[i].attributes.OBJECTID;
                  objID.push(obj);
              }

              var queryExt = new Query({
                 objectIds: objID
              });

              damagePoints.queryExtent(queryExt).then(function(result) {
                  if (result.extent) {
                      view.goTo(result.extent)
                  }
              });

              if (highlightSelect) {
                  highlightSelect.remove();
              }
              highlightSelect = layerView.highlight(objID);

              view.on("click", function() {
                layerView.filter = null;
                highlightSelect.remove();
              });
            }); // End of queryFeatures
            layerView.filter = {
              where: "Rating = " + selectedStatus
            }
          }); // End of view.whenLayerView
        }); // End of view.when
      } // End of filterByChart

    } // End of createSlices function

    createSlices("status", "Damage");
 
        }); // End of queryFeatures
    } // End of updateChart()


// Repairment Cost Chart:-------------------------------------------------------

const repairedArray = [];
const unrepairedArray = [];
const pendingArray = [];

function summaryCostStats(){
  var total_cost = {
            onStatisticField: "Cost",
            outStatisticFieldName: "total_cost",
            statisticType: "sum"
        }

        var query = damagePoints.createQuery();
        query.outStatistics = [total_cost];
        query.returnGeometry = true;
        query.groupByFieldsForStatistics = ["Repair_Status"];

        return damagePoints.queryFeatures(query).then(function(response){
            var stats = response.features;

            stats.forEach((result, index) => {
              const attributes = result.attributes;
              const REPAIR_STATUS = attributes.Repair_Status;
              const COST = attributes.total_cost;

              if (REPAIR_STATUS === 1) {
                repairedArray.push(COST);

              } else if (REPAIR_STATUS === 2) {
                unrepairedArray.push(COST);

              } else if (REPAIR_STATUS === 3) {
                pendingArray.push(COST);
              }
            });
            return [repairedArray, unrepairedArray, pendingArray];
          });
}

async function updateBudgetRepairChart([repairedArray, unrepairedArray, pendingArray]) {
  function repairStatus(){
    return {
      1: "Repaired",
      2: "Not Repaired",
      3: "Pending"
    }
}


// Remaining Balance
if (pendingArray[0] === undefined) {
  var pendingArray2 = 0;
} else {
  var pendingArray2 = pendingArray[0];
}

const TOTAL_BUDGET = repairedArray[0] + unrepairedArray[0] + pendingArray2;
const REMAINING = TOTAL_BUDGET - repairedArray[0];

var balanceBudgetValue = document.getElementById("balanceBudgetValue");
var totalSpentValue = document.getElementById("totalSpentValue");

balanceBudgetValue.innerHTML = "<h4>" + "P" + thousands_separators(REMAINING.toFixed(0)) + "</h4>" + "<br>" + "<h5>" + "REMAINING BALANCE" + "</h5>";
totalSpentValue.innerHTML = "<h4>" + "P" + thousands_separators(repairedArray[0].toFixed(0)) + "</h4>" + "<br>" + "<h5>" + "TOTAL SPENT FOR REPAIREMENT" + "</h5>";


// Chart

var chart = am4core.create("chartdiv1", am4charts.PieChart);

// Add data
    chart.data = [
      {
        "Repair": repairStatus()[1],
        "status": repairedArray[0],
        "color": am4core.color("#964b00")
      },
      {
        "Repair": repairStatus()[2],
        "status": unrepairedArray[0],
        "color": am4core.color("#d0b49f")   
      },
      {
        "Repair": repairStatus()[3],
        "status": pendingArray[0],
        "color": am4core.color("#c1c2ad") 
      }
    ];
    // Set inner radius
    chart.innerRadius = am4core.percent(50);
    
    // Add and configure Series
    function createSlices(field, status){
      var pieSeries = chart.series.push(new am4charts.PieSeries());
      pieSeries.dataFields.value = field;
      pieSeries.dataFields.category = status;
      
      pieSeries.slices.template.propertyFields.fill = "color";
      pieSeries.slices.template.stroke = am4core.color("#fff");
      pieSeries.slices.template.strokeWidth = 1;
      pieSeries.slices.template.strokeOpacity = 1;
      pieSeries.slices.template
      // change the cursor on hover to make it apparent the object can be interacted with
      .cursorOverStyle = [
        {
          "property": "cursor",
          "value": "pointer"
        }
      ];
      
      // Hover setting
      pieSeries.tooltip.label.fontSize = 9;
      
      // Pie
      //pieSeries.alignLabels = false;
      //pieSeries.labels.template.bent = false;
      pieSeries.labels.template.disabled = true;
      pieSeries.labels.template.radius = 3;
      pieSeries.labels.template.padding(0,0,0,0);
      pieSeries.labels.template.fontSize = 9;
      pieSeries.labels.template.fill = "#ffffff";

      // Ticks (a straight line)
      //pieSeries.ticks.template.disabled = true;
      pieSeries.ticks.template.fill = "#ffff00";
      
      // Create a base filter effect (as if it's not there) for the hover to return to
      var shadow = pieSeries.slices.template.filters.push(new am4core.DropShadowFilter);
      shadow.opacity = 0;
      
      // Chart Title

      // Create hover state
      var hoverState = pieSeries.slices.template.states.getKey("hover"); // normally we have to create the hover state, in this case it already exists

      // Slightly shift the shadow and make it more prominent on hover
      var hoverShadow = hoverState.filters.push(new am4core.DropShadowFilter);
      hoverShadow.opacity = 0.7;
      hoverShadow.blur = 5;
      
      // Add a legend
      const LEGEND_FONT_SIZE = 15;
      chart.legend = new am4charts.Legend();
      chart.legend.valueLabels.template.align = "right"
      chart.legend.valueLabels.template.textAlign = "end";
      //chart.legend.markers.template.disabled = true;
      chart.legend.disabled = true;
      
      //chart.legend.position = "bottom";
      chart.legend.labels.template.fontSize = LEGEND_FONT_SIZE;
      chart.legend.labels.template.fill = "#ffffff";
      //chart.legend.labels.template.fontWeight = "bold";

      chart.legend.valueLabels.template.fill = am4core.color("#ffffff"); 
      chart.legend.valueLabels.template.fontSize = LEGEND_FONT_SIZE; 
      pieSeries.legendSettings.valueText = "{value.percent.formatNumber('#.')}% ({value})";
      //pieSeries.legendSettings.labelText = "Series: [bold {color}]{category}[/]";
      
      // Chart Title
      // Chart Title
      var title = chart.titles.create();
      title.text = "BUDGET BALANCE"; // [#00ff00]world[/], Hello [font-size: 30px]world[/]
      title.fontSize = 20;
      //title.fontWeight = "bold";
      title.fill = "#ffaa00";


      /// Define marker symbols properties
      var marker = chart.legend.markers.template.children.getIndex(0);
      var markerTemplate = chart.legend.markers.template;
      marker.cornerRadius(12, 12, 12, 12);
      marker.strokeWidth = 1;
      marker.strokeOpacity = 1;
      marker.stroke = am4core.color("#ccc");
      markerTemplate.width = 18;
      markerTemplate.height = 18;

      // add total inside pie radius
      // https://www.amcharts.com/docs/v4/tutorials/automatically-resize-label-to-fit-donut-inner-radius/
      var container = new am4core.Container();
container.parent = pieSeries;
container.horizontalCenter = "middle";
container.verticalCenter = "middle";
container.width = am4core.percent(40) / Math.sqrt(2);
container.fill = "white";
      var label = new am4core.Label();
label.parent = container;
label.text = "P{values.value.sum}";
label.horizontalCenter = "middle";
label.verticalCenter = "middle";
label.fontSize = 10;
label.fill = "white";

      chart.events.on("sizechanged", function(ev) {
  var scale = (pieSeries.pixelInnerRadius * 2) / label.bbox.width;
  if (scale > 1) {
    scale = 1;
  }
  label.scale = scale;
})
      
      // This creates initial animation
      //pieSeries.hiddenState.properties.opacity = 1;
      //pieSeries.hiddenState.properties.endAngle = -90;
      //pieSeries.hiddenState.properties.startAngle = -90;
 
      // Click chart and filter, update maps
            
      // Click chart and filter, update maps
      pieSeries.slices.template.events.on("hit", filterByChart, this);
      function filterByChart(ev) {
        const SELECTED = ev.target.dataItem.category;
        if (SELECTED == repairStatus()[1]) {
          selectedStatus = 1;
        } else if (SELECTED == repairStatus()[2]) {
          selectedStatus = 2;
        } else if (SELECTED == repairStatus()[3]) {
          selectedStatus = 3;
        } else {
          selectedStatus = null;
        }
        
        view.when(function() {
          view.whenLayerView(damagePoints).then(function (layerView) {
            chartLayerView = layerView;
            chartPanelDiv.style.visibility = "visible";
            
            damagePoints.queryFeatures().then(function(results) {
              const RESULT_LENGTH = results.features;
              const ROW_N = RESULT_LENGTH.length;

              let objID = [];
              for (var i=0; i < ROW_N; i++) {
                  var obj = results.features[i].attributes.OBJECTID;
                  objID.push(obj);
              }

              var queryExt = new Query({
                 objectIds: objID
              });

              damagePoints.queryExtent(queryExt).then(function(result) {
                  if (result.extent) {
                      view.goTo(result.extent)
                  }
              });

              if (highlightSelect) {
                  highlightSelect.remove();
              }
              highlightSelect = layerView.highlight(objID);

              view.on("click", function() {
                layerView.filter = null;
                highlightSelect.remove();
              });
            }); // End of queryFeatures
            layerView.filter = {
              where: "Repair_Status = " + selectedStatus
            }
          }); // End of view.whenLayerView
        }); // End of view.when
      } // End of filterByChart

    } // End of createSlices function

    createSlices("status", "Repair");
 

} // End of updateBudgetRepairChart()

}); // End of am4core.ready

/////////////////////////////////////////////////////////
view.ui.empty("top-left");

// Full screen logo
view.ui.add(
  new Fullscreen({
    view: view,
    element: applicationDiv
  }),
  "top-right"
  );


var legend = new Legend({
  view: view,
  container: legendDiv,
  layerInfos: [
    {
        layer: damagePoints,
        title: "Damage Ratings of Road"
    },
  {
    layer: majorRoadLayer,
    title: "Major Raod"
  },
  {
    layer: expressRoad,
    title: "Expressway"
  },
  {
    layer: municipalBoundary,
    title: "Municipal Boundary"
  },
  {
    layer: phpBoundary,
    title: "Country Boundary"
  }
]
});

var legendExpand = new Expand({
    view: view,
    content: legend,
    expandIconClass: "esri-icon-legend",
    group: "bottom-right"
});
view.ui.add(legendExpand, {
    position: "top-right"
});


// LayerList and Add legend to the LayerList
var layerList = new LayerList({
  view: view,
  listItemCreatedFunction: function(event) {
    const item = event.item;
    if (item.title === "Municipal Boundary" || item.title === "Boundary"){
      item.visible = false
    }
  }
});

var layerListExpand = new Expand ({
    view: view,
    content: layerList,
    expandIconClass: "esri-icon-visible",
    group: "top-right"
});
view.ui.add(layerListExpand, {
    position: "top-right"
});


      });
    </script>
  </head>
  <body class="sassy-theme">
    <div id="applicationDiv">
      <div class="container">
        <div id="viewDiv" class="box">
          <div id="legendDiv" class="esri-widget"></div>
        </div>
        <div id="informationDiv" class="box">
          <div id="titleDiv">ROAD DAMAGE</div>
          <div id="damageCountInViewDiv"></div>
          <div id="listDiv" class="panel-side">
              <input id="tab1" type="radio" name="check" checked>
              <label for="tab1" class="tab_lab1">STREET</label>
              <input id="tab2" type="radio" name="check">
              <label for="tab2" class="tab_lab2">ID</label>
              <input id="tab3" type="radio" name="check">
              <label for="tab3" class="tab_lab3">CLASS</label>
            <div class="panels">
              <div id="area1" class="panel">
                <ul id="majorRoadDamageList">
                  <li>Loading&hellip;</li>
                </ul>
              </div>
              <div id="area2" class="panel">
                <ul id="roadIdList">
                  <li>Loading&hellip;</li>
                </ul>
              </div>
              <div id="area3" class="panel">
                <ul id="roadSectionList">
                  <li>Loading&hellip;</li>
                </ul>
              </div>
              <div class="chart_panel">
                <input id="chart_tab" type="radio" name="check1">
                <label for="chart_tab" class="chart_tab">SUMMARY CHART</label>
              </div>
            </div>
          </div>
          <div id="chartPanelDiv">
            <div id="chartdiv"></div>
            <div id="chartdiv1"></div>
            <div id="balanceBudgetValue"></div>
            <div id="totalSpentValue"></div>
            <div class="list_panel">
              <input id="list_tab" type="radio" name="check1">
              <label for="list_tab" class="list_tab">RETURN TO LIST</label>
            </div>
          </div>
          <div id="detailInfoDiv">
            <div id="damageLabel"></div>
            <div id="repaireStatusLabel"></div>
            <div id="streetNameLabel"></div>
            <div id="reportLabel"></div>
            <div id="estimatedCostLabel"></div>
            <div class="list_panel2">
                <input id="list_tab" type="radio" name="check2">
                <label for="list_tab" class="list_tab">RETURN TO LIST</label>
            </div>
          </div>
        </div>
      </div>
    </div>
</body>
</html>
