<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="initial-scale=1,maximum-scale=1,user-scalable=no"
    />
    <title>
      Sample
    </title>
    <style>

html,
body,
#viewDiv {
  padding: 0;
  margin: 0;
  height: 100%;
  width: 100%;
}

#titleDiv {
  background-color: lightgray;
  color: black;
  padding: 5px;
  position: absolute;
  z-index: 2;
  top: 0;
  right: 0;
  font-size: 20pt;
  font-weight: bolder;
  width: 100%;
  height: 30px;
  text-align: center;
  opacity: 0.75;
}


    </style>

    <link
    rel="stylesheet"
    href="https://js.arcgis.com/4.24/esri/themes/dark/main.css"
    />
<!-- Resources -->
<script src="C:/Users/eiji.LAPTOP-KSD9P6CP/OneDrive - Oriental Consultants Global JV/Documents/GitHub/EijiGorilla.github.io/WebApp/ArcGIS_API_for_JavaScript/Sample/Anime_js/src/pointanime.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.0/anime.min.js"></script>
<script src="https://cdn.amcharts.com/lib/4/core.js"></script>
<script src="https://cdn.amcharts.com/lib/4/charts.js"></script>
<script src="https://www.amcharts.com/lib/4/themes/dark.js"></script>
<script src="https://cdn.amcharts.com/lib/4/themes/animated.js"></script>
<script src="https://js.arcgis.com/4.24/"></script>

    <script>
      require([
      "esri/views/SceneView",
  "esri/WebScene",
  "esri/layers/GeoJSONLayer",
  "esri/layers/GraphicsLayer",
  "esri/Graphic",
  "esri/symbols/WebStyleSymbol",
  "esri/core/reactiveUtils",
  "esri/Map",
  "esri/layers/TileLayer",
  "esri/layers/VectorTileLayer",
  "esri/geometry/Circle"
      ], function(
        SceneView,
  WebScene,
  GeoJSONLayer,
  GraphicsLayer,
  Graphic,
  WebStyleSymbol,
  reactiveUtils,
  Map,
  TileLayer,
  VectorTileLayer,
  Circle
      ) {

  // Flight path
  //var pointA = { latitude: 52.55573101150287, longitude: 13.266720847998348 };
  //var pointB = { latitude: 52.55673101150287, longitude: 13.266720847998348 };

  var scale = 1.5;

  /*
  var scene = new WebScene({
    portalItem: {
      id: "85a1d98e43f34ba5bcf8d9aa4d3a44be"
    }
  });
  */

  // Add scene view
  var map = new Map({
  basemap: {
            baseLayers: [
              new TileLayer({
                portalItem: {
                  id: "1b243539f4514b6ba35e7d995890db1d" // world hillshade
                }
              }),
              new VectorTileLayer({
                portalItem: {
                  id: "0a0d74b5fbc0431fa0f6c938d0b04505" // community style vector tiles
                },
                blendMode: "multiply"
              })
            ]
          },
          ground: "world-elevation"

}); 

  var view = new SceneView({
    // qualityProfile: "high",
    map: map,
    container: "viewDiv",
    viewingMode: "local",
    camera: {
      position: {
        x: 120.9988027, // {latitude: 14.65485964, longitude: 120.9988027};
        y: 14.65485964,
        z: 10
      },
      heading: 110.19422534050881,
      tilt: 82.04763573016989
    }
  });
  view.ui.add(["toggle-play", "toggle-pause"], "top-left");

  var graphicsLayer = new GraphicsLayer({
    elevationInfo: {
      mode: "relative-to-ground"
    }
  });
  //graphicsLayer.screenSizePerspectiveEnabled = true;
  // Add a 3D point graphics
  var plane = new Graphic({
    geometry: { ...point1, z: 0, type: "point" }
  });

  // Add custom 3D web style symbol
  function customSymbol3D(name) {
  return {
    type: "web-style",
    portal: "https://www.maps.arcgis.com",

    // IMPORTANT: Your browser needs to be able to open the following link. It will say insecure so need to go to advanced.
    styleUrl: "https://www.maps.arcgis.com/sharing/rest/content/items/c04d4d4145f64f8fa38407dd5331dd1f/data",
    name: name
  };
}

 // Add your own image:
 // Note a simple image will not be re-sized in different zooms.
 // The size remains the same regardless of zoom (i.e. should not use)
function getUniqueValueSymbol(name, sizeS) {
            return {
            type: "point-3d", // autocasts as new PointSymbol3D()
            symbolLayers: [
              {
                type: "icon", // autocasts as new IconSymbol3DLayer()
                resource: {
                  href: name
                },
                size: sizeS,
                outline: {
                  color: "white",
                  size: 2
                }
              }
            ]
          };
        }

  
  // Add to graphicsLayer
  (async () => {

    // user Defined
    //var symbol = customSymbol3D("3D_Telecom_BTS");
    //var symbol = getUniqueValueSymbol("https://EijiGorilla.github.io/Symbols/Demolished.png", 50);
    
    // Esris
    var webStyleSymbol = new WebStyleSymbol({
      name: "Standing Circle",
      styleName: "EsriIconsStyle"
    });

    var symbol = await webStyleSymbol.fetchSymbol();
    symbol.symbolLayers.items[0].heading = 80;
    symbol.symbolLayers.items[0].height *= scale;
    symbol.symbolLayers.items[0].depth *= scale;
    symbol.symbolLayers.items[0].width *= scale;
    symbol.symbolLayers.items[0].material.color *= "white";
    //symbol.symbolLayers.items[0].size *= 5;

    
    plane.symbol = symbol;

    graphicsLayer.add(plane);
  })();


  (async () => {
    await view.when();
    view.map.basemap.referenceLayers = [];
    view.map.add(graphicsLayer);
    view.environment.atmosphere.quality = "high";
  })();

  var point = plane.geometry.clone();

  var animation = anime
    .timeline({
      autoplay: false,
      direction: 'alternate',
      targets: point,
      loop: true,
      duration: 5000,
      update: function() {
        plane.geometry = point.clone(); // clone new position. Without clone, position is not updated
      }
    })
    .add({...point1, easing: 'linear'})
.add({...point2, easing: 'linear'})
.add({...point3, easing: 'linear'})
.add({...point4, easing: 'linear'})
.add({...point5, easing: 'linear'})
.add({...point6, easing: 'linear'})
.add({...point7, easing: 'linear'})
.add({...point8, easing: 'linear'})
.add({...point9, easing: 'linear'})
.add({...point10, easing: 'linear'})
.add({...point11, easing: 'linear'})
.add({...point12, easing: 'linear'})
.add({...point13, easing: 'linear'})
.add({...point14, easing: 'linear'})
.add({...point15, easing: 'linear'})
.add({...point16, easing: 'linear'})
.add({...point17, easing: 'linear'})
.add({...point18, easing: 'linear'})
.add({...point19, easing: 'linear'})
.add({...point20, easing: 'linear'})
.add({...point21, easing: 'linear'})
.add({...point22, easing: 'linear'})
.add({...point23, easing: 'linear'})
.add({...point24, easing: 'linear'})
.add({...point25, easing: 'linear'})
.add({...point26, easing: 'linear'})
.add({...point27, easing: 'linear'})
.add({...point28, easing: 'linear'})
.add({...point29, easing: 'linear'})
.add({...point30, easing: 'linear'})
.add({...point31, easing: 'linear'})
.add({...point32, easing: 'linear'})
.add({...point33, easing: 'linear'})
.add({...point34, easing: 'linear'})
.add({...point35, easing: 'linear'})
.add({...point36, easing: 'linear'})
.add({...point37, easing: 'linear'})
.add({...point38, easing: 'linear'})
.add({...point39, easing: 'linear'})
.add({...point40, easing: 'linear'})
.add({...point41, easing: 'linear'})
.add({...point42, easing: 'linear'})
.add({...point43, easing: 'linear'})
.add({...point44, easing: 'linear'})
.add({...point45, easing: 'linear'})
.add({...point46, easing: 'linear'})
.add({...point47, easing: 'linear'})
.add({...point48, easing: 'linear'})
.add({...point49, easing: 'linear'})
.add({...point50, easing: 'linear'})
.add({...point51, easing: 'linear'})
.add({...point52, easing: 'linear'})
.add({...point53, easing: 'linear'})
.add({...point54, easing: 'linear'})
.add({...point55, easing: 'linear'})
.add({...point56, easing: 'linear'})
.add({...point57, easing: 'linear'})
.add({...point58, easing: 'linear'})
.add({...point59, easing: 'linear'})
.add({...point60, easing: 'linear'})
.add({...point61, easing: 'linear'})
.add({...point62, easing: 'linear'})
.add({...point63, easing: 'linear'})
.add({...point64, easing: 'linear'})
.add({...point65, easing: 'linear'})
.add({...point66, easing: 'linear'})
.add({...point67, easing: 'linear'})
.add({...point68, easing: 'linear'})
.add({...point69, easing: 'linear'})
.add({...point70, easing: 'linear'})
.add({...point71, easing: 'linear'})
.add({...point72, easing: 'linear'})
.add({...point73, easing: 'linear'})
.add({...point74, easing: 'linear'})
.add({...point75, easing: 'linear'})
.add({...point76, easing: 'linear'})
.add({...point77, easing: 'linear'})
.add({...point78, easing: 'linear'})
.add({...point79, easing: 'linear'})
.add({...point80, easing: 'linear'})
.add({...point81, easing: 'linear'})
.add({...point82, easing: 'linear'})
.add({...point83, easing: 'linear'})
.add({...point84, easing: 'linear'})
.add({...point85, easing: 'linear'})
.add({...point86, easing: 'linear'})
.add({...point87, easing: 'linear'})
.add({...point88, easing: 'linear'})
.add({...point89, easing: 'linear'})
.add({...point90, easing: 'linear'})
.add({...point91, easing: 'linear'})
.add({...point92, easing: 'linear'})
.add({...point93, easing: 'linear'})
.add({...point94, easing: 'linear'})
.add({...point95, easing: 'linear'})
.add({...point96, easing: 'linear'})
.add({...point97, easing: 'linear'})
.add({...point98, easing: 'linear'})
.add({...point99, easing: 'linear'})
.add({...point100, easing: 'linear'})
.add({...point101, easing: 'linear'})
.add({...point102, easing: 'linear'})
.add({...point103, easing: 'linear'})
.add({...point104, easing: 'linear'})
.add({...point105, easing: 'linear'})
.add({...point106, easing: 'linear'})
.add({...point107, easing: 'linear'})
.add({...point108, easing: 'linear'})
.add({...point109, easing: 'linear'})
.add({...point110, easing: 'linear'})
.add({...point111, easing: 'linear'})
.add({...point112, easing: 'linear'})
.add({...point113, easing: 'linear'})
.add({...point114, easing: 'linear'})
.add({...point115, easing: 'linear'})
.add({...point116, easing: 'linear'})
.add({...point117, easing: 'linear'})
.add({...point118, easing: 'linear'})
.add({...point119, easing: 'linear'})
.add({...point120, easing: 'linear'})
.add({...point121, easing: 'linear'})
.add({...point122, easing: 'linear'})
.add({...point123, easing: 'linear'})
.add({...point124, easing: 'linear'})
.add({...point125, easing: 'linear'})
.add({...point126, easing: 'linear'})
.add({...point127, easing: 'linear'})
.add({...point128, easing: 'linear'})
.add({...point129, easing: 'linear'})
.add({...point130, easing: 'linear'})
.add({...point131, easing: 'linear'})
.add({...point132, easing: 'linear'})
.add({...point133, easing: 'linear'})
.add({...point134, easing: 'linear'})
.add({...point135, easing: 'linear'})
.add({...point136, easing: 'linear'})
.add({...point137, easing: 'linear'})
.add({...point138, easing: 'linear'})
.add({...point139, easing: 'linear'})
.add({...point140, easing: 'linear'})
.add({...point141, easing: 'linear'})
.add({...point142, easing: 'linear'})
.add({...point143, easing: 'linear'})
.add({...point144, easing: 'linear'})
.add({...point145, easing: 'linear'})
.add({...point146, easing: 'linear'})
.add({...point147, easing: 'linear'})
.add({...point148, easing: 'linear'})
.add({...point149, easing: 'linear'})
.add({...point150, easing: 'linear'})
.add({...point151, easing: 'linear'})
.add({...point152, easing: 'linear'})
.add({...point153, easing: 'linear'})
.add({...point154, easing: 'linear'})
.add({...point155, easing: 'linear'})
.add({...point156, easing: 'linear'})
.add({...point157, easing: 'linear'})
.add({...point158, easing: 'linear'})
.add({...point159, easing: 'linear'})
.add({...point160, easing: 'linear'})
.add({...point161, easing: 'linear'})
.add({...point162, easing: 'linear'})
.add({...point163, easing: 'linear'})
.add({...point164, easing: 'linear'})
.add({...point165, easing: 'linear'})
.add({...point166, easing: 'linear'})
.add({z: 0, easing: 'easeOutSine'},0)


/*
    .add({
      ...point2,
      easing: "linear"
    })
    .add(
      {
        z: 0,
        easing: "easeOutSine"
      },
      0
    )
*/

  document.querySelector("#toggle-play").onclick = () => {
    document.querySelector("#toggle-play").style.display = "none";
    document.querySelector("#toggle-pause").style.display = "";
    animation.play();
  };
  document.querySelector("#toggle-pause").onclick = () => {
    document.querySelector("#toggle-pause").style.display = "none";
    document.querySelector("#toggle-play").style.display = "";
    animation.pause();
  };

      });
    </script>
  </head>
  <body class="sassy-theme">
    <div id="viewDiv" class="esri-widget">
      <div id="toggle-play" class="esri-widget esri-widget--button esri-interactive" title="Play Pause">
        <span class="esri-icon-play" />
      </div>
      <div id="toggle-pause" class="esri-widget esri-widget--button esri-interactive" title="Play Pause" style="display: none;">
        <span class="esri-icon-pause" />
      </div>
    </div>
</body>
</html>
